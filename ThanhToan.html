<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh to√°n - SunShine School</title>

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />

    <!-- Custom CSS - loaded after Bootstrap to override its styles -->
    <link rel="stylesheet" href="./assets/css/style.css" />
    <link rel="stylesheet" href="./assets/css/header.css" />
    <link rel="stylesheet" href="./assets/css/facilities.css" />
    <link rel="stylesheet" href="./assets/css/blog.css" />
    <link rel="stylesheet" href="./assets/css/kinh-nghiem-hay.css" />
    <link rel="stylesheet" href="./assets/css/brand-partners.css" />
    <link rel="stylesheet" href="./assets/css/footer.css" />
    <link rel="stylesheet" href="./assets/css/scroll-top.css" />
    <link rel="stylesheet" href="./assets/css/breadcrumb.css" />

    <style>
      /* Checkout Page Styles */
      .wrap {
        display: flex;
        min-height: 100vh;
        background: #f5f5f5;
      }

      .main {
        flex: 1 1 60%;
        background: white;
        padding: 0;
      }

      .main__header {
        padding: 20px 30px;
        border-bottom: 1px solid #e1e8ed;
      }

      .shop__name {
        margin: 0;
        font-size: 18px;
        font-weight: bold;
        color: #333;
      }

      .shop__name a {
        text-decoration: none;
        color: inherit;
      }

      .main__content {
        padding: 30px;
      }

      .animate-floating-labels.row {
        display: flex;
        flex-wrap: wrap;
        margin: 0 -15px;
      }

      .col.col--two {
        flex: 0 0 50%;
        max-width: 50%;
        padding: 0 15px;
      }

      .section {
        margin-bottom: 30px;
      }

      .section__header {
        margin-bottom: 20px;
      }

      .section__title {
        font-size: 18px;
        font-weight: 600;
        color: #333;
        margin: 0;
        display: flex;
        align-items: center;
      }

      .section__title--icon {
        margin-right: 10px;
        color: #666;
      }

      .layout-flex {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .layout-flex__item--stretch {
        flex: 1;
      }

      .fieldset {
        margin-bottom: 20px;
      }

      .field {
        margin-bottom: 15px;
      }

      .field__input-wrapper {
        position: relative;
      }

      .field__label {
        position: absolute;
        top: 50%;
        left: 12px;
        transform: translateY(-50%);
        background: white;
        padding: 0 5px;
        color: #666;
        font-size: 14px;
        pointer-events: none;
        transition: all 0.2s ease;
        z-index: 1;
      }

      .field__input:focus + .field__label,
      .field__input:not(:placeholder-shown) + .field__label,
      .field--show-floating-label .field__label {
        top: 0;
        font-size: 12px;
        color: #333;
      }

      .field__input {
        width: 100%;
        padding: 15px 12px;
        border: 1px solid #d9d9d9;
        border-radius: 4px;
        font-size: 14px;
        line-height: 1.4;
        background: white;
        transition: border-color 0.2s ease;
      }

      .field__input:focus {
        outline: none;
        border-color: #338dbc;
        box-shadow: 0 0 0 1px rgba(51, 141, 188, 0.3);
      }

      .field__input--select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 12px center;
        background-repeat: no-repeat;
        background-size: 16px;
        padding-right: 40px;
      }

      .content-box {
        border: 1px solid #d9d9d9;
        border-radius: 4px;
        background: white;
      }

      .content-box__row {
        padding: 15px;
        border-bottom: 1px solid #e9e9e9;
      }

      .content-box__row:last-child {
        border-bottom: none;
      }

      .radio-wrapper {
        display: flex;
        align-items: flex-start;
      }

      .radio__input {
        margin-right: 12px;
        margin-top: 2px;
      }

      .input-radio {
        width: 16px;
        height: 16px;
        accent-color: #338dbc;
      }

      .radio__label {
        flex: 1;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .radio__label__primary {
        font-weight: 500;
        color: #333;
      }

      .payment-icon {
        width: 24px;
        height: 24px;
        background: #338dbc;
        border-radius: 2px;
        display: inline-block;
      }

      /* Sidebar Styles */
      .sidebar {
        flex: 0 0 40%;
        max-width: 40%;
        background: #fafafa;
        border-left: 1px solid #e1e8ed;
        padding: 0;
      }

      .sidebar__header {
        padding: 20px 25px;
        border-bottom: 1px solid #e1e8ed;
        background: white;
      }

      .sidebar__title {
        font-size: 16px;
        font-weight: 600;
        margin: 0;
        color: #333;
      }

      .sidebar__content {
        padding: 25px;
      }

      .order-summary {
        background: white;
        border-radius: 4px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .order-summary__section {
        border-bottom: 1px solid #e9e9e9;
      }

      .order-summary__section:last-child {
        border-bottom: none;
      }

      .product-table {
        width: 100%;
        border-collapse: collapse;
      }

      .product {
        border-bottom: 1px solid #e9e9e9;
      }

      .product:last-child {
        border-bottom: none;
      }

      .product__image {
        width: 80px;
        padding: 15px;
        vertical-align: top;
      }

      .product-thumbnail {
        position: relative;
        width: 50px;
        height: 50px;
      }

      .product-thumbnail__wrapper {
        width: 100%;
        height: 100%;
        border-radius: 4px;
        overflow: hidden;
      }

      .product-thumbnail__image {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .product-thumbnail__quantity {
        position: absolute;
        top: -8px;
        right: -8px;
        background: #338dbc;
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
      }

      .product__description {
        padding: 15px 15px 15px 0;
        vertical-align: top;
      }

      .product__description__name {
        font-weight: 500;
        color: #333;
        font-size: 14px;
        line-height: 1.4;
      }

      .product__price {
        padding: 15px;
        vertical-align: top;
        text-align: right;
        font-weight: 600;
        color: #333;
      }

      .total-line-table {
        width: 100%;
        border-collapse: collapse;
      }

      .total-line {
        border-bottom: 1px solid #e9e9e9;
      }

      .total-line:last-child {
        border-bottom: none;
      }

      .total-line__name {
        padding: 12px 15px;
        text-align: left;
        font-weight: normal;
        color: #666;
        font-size: 14px;
      }

      .total-line__price {
        padding: 12px 15px;
        text-align: right;
        font-weight: 500;
        color: #333;
        font-size: 14px;
      }

      .payment-due .total-line__name {
        font-weight: 600;
        color: #333;
        font-size: 16px;
      }

      .payment-due .total-line__price {
        font-weight: 600;
        color: #338dbc;
        font-size: 18px;
      }

      .btn {
        display: inline-block;
        padding: 15px 30px;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        font-weight: 600;
        text-align: center;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .btn-checkout {
        background: #338dbc;
        color: white;
        width: 100%;
      }

      .btn-checkout:hover {
        background: #2c7aa0;
        color: white;
        text-decoration: none;
      }

      .previous-link {
        display: inline-flex;
        align-items: center;
        color: #338dbc;
        text-decoration: none;
        font-size: 14px;
        margin-top: 15px;
      }

      .previous-link:hover {
        text-decoration: underline;
        color: #2c7aa0;
      }

      .previous-link__arrow {
        margin-right: 8px;
        font-size: 12px;
      }

      .field__input-btn-wrapper {
        display: flex;
        align-items: stretch;
      }

      .field__input-btn-wrapper .field__input-wrapper {
        flex: 1;
      }

      .field__input-btn {
        margin-left: 10px;
        padding: 0 20px;
        background: #338dbc;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        white-space: nowrap;
      }

      .field__input-btn:hover {
        background: #2c7aa0;
      }

      .field__input-btn--disabled,
      .field__input-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      .alert {
        padding: 15px;
        border-radius: 4px;
        margin-bottom: 15px;
      }

      .alert--info {
        background: #e1f5fe;
        color: #0277bd;
        border: 1px solid #b3e5fc;
      }

      .alert--danger {
        background: #ffebee;
        color: #c62828;
        border: 1px solid #ffcdd2;
      }

      .hide {
        display: none !important;
      }

      .visually-hidden {
        position: absolute !important;
        width: 1px !important;
        height: 1px !important;
        padding: 0 !important;
        margin: -1px !important;
        overflow: hidden !important;
        clip: rect(0, 0, 0, 0) !important;
        white-space: nowrap !important;
        border: 0 !important;
      }

      @media (max-width: 1007px) {
        .wrap {
          flex-direction: column;
        }

        .main,
        .sidebar {
          flex: none;
          max-width: none;
        }

        .sidebar {
          border-left: none;
          border-top: 1px solid #e1e8ed;
        }

        .col.col--two {
          flex: 0 0 100%;
          max-width: 100%;
        }

        .hide-on-mobile {
          display: none !important;
        }

        .hide-on-desktop {
          display: block !important;
        }
      }

      @media (min-width: 1008px) {
        .hide-on-desktop {
          display: none !important;
        }
      }
    </style>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Lobster&display=swap"
      rel="stylesheet" />
    <!-- Swiper Slider CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper@6.8.4/swiper-bundle.min.css" />
    <!-- Testimonial CSS -->
    <link rel="stylesheet" href="./assets/css/testimonials.css" />
    <!-- Services CSS -->
    <link rel="stylesheet" href="./assets/css/services.css" />

    <!-- Override Bootstrap breadcrumb styles with our custom styles -->
    <style>
      /* Additional breadcrumb overrides if needed */
    </style>
  </head>
  <body>
    <!-- Header Component -->
    <!-- Content of the header is in forms/components/header.html -->
    <div id="header-container"></div>

    <main>
      <!-- Breadcrumb Section -->
      <section class="bread-crumb">
        <div class="container">
          <div class="breadcrumb-wrapper">
            <div class="breadcrumb-content">
              <ul class="breadcrumb">
                <li class="home">
                  <a href="/">Trang ch·ªß</a>
                  <i class="fa-solid fa-chevron-right"></i>
                </li>
                <li>
                  <span>Thanh To√°n</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- About Content Section -->
      <section class="page">
        <div class="container">
          <form
            id="checkoutForm"
            method="post"
            data-define="{
            loadingShippingErrorMessage: 'Kh√¥ng th·ªÉ load ph√≠ v·∫≠n chuy·ªÉn. Vui l√≤ng th·ª≠ l·∫°i',
            loadingReductionCodeErrorMessage: 'C√≥ l·ªói x·∫£y ra khi √°p d·ª•ng khuy·∫øn m√£i. Vui l√≤ng th·ª≠ l·∫°i',
            submitingCheckoutErrorMessage: 'C√≥ l·ªói x·∫£y ra khi x·ª≠ l√Ω. Vui l√≤ng th·ª≠ l·∫°i',
            requireShipping: true,
            requireDistrict: false,
            requireWard: false,
            shouldSaveCheckoutAbandon: true}"
            action="/checkout"
            data-bind-event-submit="handleCheckoutSubmit(event)"
            data-bind-event-keypress="handleCheckoutKeyPress(event)"
            data-bind-event-change="handleCheckoutChange(event)">
            <input type="hidden" name="_method" value="patch" />
            <div class="wrap">
              <main class="main">
                <header class="main__header">
                  <div class="logo logo--left">
                    <h1 class="shop__name">
                      <a href="/">SunShine School Theme</a>
                    </h1>
                  </div>
                </header>
                <div class="main__content">
                  <article class="animate-floating-labels row">
                    <div class="col col--two">
                      <section class="section">
                        <div class="section__header">
                          <div class="layout-flex">
                            <h2
                              class="section__title layout-flex__item layout-flex__item--stretch">
                              <i
                                class="fa fa-id-card-o fa-lg section__title--icon hide-on-desktop"></i>
                              Th√¥ng tin nh·∫≠n h√†ng
                            </h2>
                            <a href="/account/login?returnUrl=/checkout">
                              <i class="fa fa-user-circle-o fa-lg"></i>
                              <span>ƒêƒÉng nh·∫≠p </span>
                            </a>
                          </div>
                        </div>
                        <div class="section__content">
                          <div class="fieldset">
                            <div
                              class="field"
                              data-bind-class="{'field--show-floating-label': email}">
                              <div class="field__input-wrapper">
                                <label for="email" class="field__label">
                                  Email
                                </label>
                                <input
                                  name="email"
                                  id="email"
                                  type="email"
                                  class="field__input"
                                  data-bind="email"
                                  value="" />
                              </div>
                            </div>

                            <div
                              class="field"
                              data-bind-class="{'field--show-floating-label': billing.name}">
                              <div class="field__input-wrapper">
                                <label for="billingName" class="field__label"
                                  >H·ªç v√† t√™n</label
                                >
                                <input
                                  name="billingName"
                                  id="billingName"
                                  type="text"
                                  class="field__input"
                                  data-bind="billing.name"
                                  value="" />
                              </div>
                            </div>

                            <div
                              class="field"
                              data-bind-class="{'field--show-floating-label': billing.phone}">
                              <div
                                class="field__input-wrapper field__input-wrapper--connected"
                                data-define="{phoneInput: new InputPhone(this)}">
                                <label for="billingPhone" class="field__label">
                                  S·ªë ƒëi·ªán tho·∫°i (t√πy ch·ªçn)
                                </label>
                                <input
                                  name="billingPhone"
                                  id="billingPhone"
                                  type="tel"
                                  class="field__input"
                                  data-bind="billing.phone"
                                  value="" />
                                <div class="field__input-phone-region-wrapper">
                                  <select
                                    class="field__input select-phone-region"
                                    name="billingPhoneRegion"
                                    data-init-value="VN">
                                    <option value="VN" selected>
                                      Vietnam (+84)
                                    </option>
                                  </select>
                                </div>
                              </div>
                            </div>

                            <div
                              class="field"
                              data-bind-class="{'field--show-floating-label': billing.address}">
                              <div class="field__input-wrapper">
                                <label
                                  for="billingAddress"
                                  class="field__label">
                                  ƒê·ªãa ch·ªâ (t√πy ch·ªçn)
                                </label>
                                <input
                                  name="billingAddress"
                                  id="billingAddress"
                                  type="text"
                                  class="field__input"
                                  data-bind="billing.address"
                                  value="" />
                              </div>
                            </div>

                            <div class="field field--show-floating-label">
                              <div
                                class="field__input-wrapper field__input-wrapper--select2">
                                <label
                                  for="billingProvince"
                                  class="field__label"
                                  >T·ªânh th√†nh</label
                                >
                                <select
                                  name="billingProvince"
                                  id="billingProvince"
                                  size="1"
                                  class="field__input field__input--select"
                                  data-bind="billing.province"
                                  value=""
                                  data-address-type="province"
                                  data-address-zone="billing">
                                  <option value="" hidden>---</option>
                                  <option value="1">H√† N·ªôi</option>
                                  <option value="2">TP H·ªì Ch√≠ Minh</option>
                                  <option value="3">An Giang</option>
                                  <option value="4">B√† R·ªãa-V≈©ng T√†u</option>
                                  <option value="5">B·∫Øc Giang</option>
                                  <option value="6">B·∫Øc K·∫°n</option>
                                  <option value="7">B·∫°c Li√™u</option>
                                  <option value="8">B·∫Øc Ninh</option>
                                  <option value="9">B·∫øn Tre</option>
                                  <option value="10">B√¨nh D∆∞∆°ng</option>
                                  <option value="11">B√¨nh ƒê·ªãnh</option>
                                  <option value="12">B√¨nh Ph∆∞·ªõc</option>
                                  <option value="13">B√¨nh Thu·∫≠n</option>
                                  <option value="14">C√† Mau</option>
                                  <option value="15">Cao B·∫±ng</option>
                                  <option value="16">C·∫ßn Th∆°</option>
                                  <option value="17">ƒê√† N·∫µng</option>
                                  <option value="18">ƒê·∫Øk L·∫Øk</option>
                                  <option value="19">ƒê·∫Øk N√¥ng</option>
                                  <option value="20">ƒêi·ªán Bi√™n</option>
                                  <option value="21">ƒê·ªìng Nai</option>
                                  <option value="22">ƒê·ªìng Th√°p</option>
                                  <option value="23">Gia Lai</option>
                                  <option value="24">H√† Giang</option>
                                  <option value="25">H√† Nam</option>
                                  <option value="26">H√† Tƒ©nh</option>
                                  <option value="27">H·∫£i D∆∞∆°ng</option>
                                  <option value="28">H·∫£i Ph√≤ng</option>
                                  <option value="29">H·∫≠u Giang</option>
                                  <option value="30">H√≤a B√¨nh</option>
                                  <option value="31">H∆∞ng Y√™n</option>
                                  <option value="32">Kh√°nh H√≤a</option>
                                  <option value="33">Ki√™n Giang</option>
                                  <option value="34">Kon Tum</option>
                                  <option value="35">Lai Ch√¢u</option>
                                  <option value="36">L√¢m ƒê·ªìng</option>
                                  <option value="37">L·∫°ng S∆°n</option>
                                  <option value="38">L√†o Cai</option>
                                  <option value="39">Long An</option>
                                  <option value="40">Nam ƒê·ªãnh</option>
                                  <option value="41">Ngh·ªá An</option>
                                  <option value="42">Ninh B√¨nh</option>
                                  <option value="43">Ninh Thu·∫≠n</option>
                                  <option value="44">Ph√∫ Th·ªç</option>
                                  <option value="45">Ph√∫ Y√™n</option>
                                  <option value="46">Qu·∫£ng B√¨nh</option>
                                  <option value="47">Qu·∫£ng Nam</option>
                                  <option value="48">Qu·∫£ng Ng√£i</option>
                                  <option value="49">Qu·∫£ng Ninh</option>
                                  <option value="50">Qu·∫£ng Tr·ªã</option>
                                  <option value="51">S√≥c TrƒÉng</option>
                                  <option value="52">S∆°n La</option>
                                  <option value="53">T√¢y Ninh</option>
                                  <option value="54">Th√°i B√¨nh</option>
                                  <option value="55">Th√°i Nguy√™n</option>
                                  <option value="56">Thanh H√≥a</option>
                                  <option value="57">Th·ª´a Thi√™n Hu·∫ø</option>
                                  <option value="58">Ti·ªÅn Giang</option>
                                  <option value="59">Tr√† Vinh</option>
                                  <option value="60">Tuy√™n Quang</option>
                                  <option value="61">Vƒ©nh Long</option>
                                  <option value="62">Vƒ©nh Ph√∫c</option>
                                  <option value="63">Y√™n B√°i</option>
                                </select>
                              </div>
                            </div>

                            <div class="field field--show-floating-label">
                              <div
                                class="field__input-wrapper field__input-wrapper--select2">
                                <label
                                  for="billingDistrict"
                                  class="field__label">
                                  Qu·∫≠n huy·ªán (t√πy ch·ªçn)
                                </label>
                                <select
                                  name="billingDistrict"
                                  id="billingDistrict"
                                  size="1"
                                  class="field__input field__input--select"
                                  value=""
                                  data-bind="billing.district"
                                  data-address-type="district"
                                  data-address-zone="billing"
                                  disabled="disabled"></select>
                              </div>
                            </div>
                          </div>
                        </div>
                      </section>

                      <div class="fieldset">
                        <h3 class="visually-hidden">Ghi ch√∫</h3>
                        <div
                          class="field"
                          data-bind-class="{'field--show-floating-label': note}">
                          <div class="field__input-wrapper">
                            <label for="note" class="field__label">
                              Ghi ch√∫ (t√πy ch·ªçn)
                            </label>
                            <textarea
                              name="note"
                              id="note"
                              class="field__input"
                              data-bind="note"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col col--two">
                      <section
                        class="section"
                        data-define="{shippingMethod: ''}">
                        <div class="section__header">
                          <div class="layout-flex">
                            <h2
                              class="section__title layout-flex__item layout-flex__item--stretch">
                              <i
                                class="fa fa-truck fa-lg section__title--icon hide-on-desktop"></i>
                              V·∫≠n chuy·ªÉn
                            </h2>
                          </div>
                        </div>
                        <div
                          class="section__content"
                          data-tg-refresh="refreshShipping"
                          id="shippingMethodList"
                          data-define="{isAddressSelecting: true, shippingMethods: []}">
                          <div
                            class="alert alert--loader spinner spinner--active hide"
                            data-bind-show="isLoadingShippingMethod">
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              class="spinner-loader">
                              <use href="#spinner"></use>
                            </svg>
                          </div>

                          <div
                            class="alert alert--info"
                            data-bind-show="!isLoadingShippingMethod && isAddressSelecting">
                            Vui l√≤ng nh·∫≠p th√¥ng tin giao h√†ng
                          </div>
                        </div>
                      </section>

                      <section class="section">
                        <div class="section__header">
                          <div class="layout-flex">
                            <h2
                              class="section__title layout-flex__item layout-flex__item--stretch">
                              <i
                                class="fa fa-credit-card fa-lg section__title--icon hide-on-desktop"></i>
                              Thanh to√°n
                            </h2>
                          </div>
                        </div>
                        <div class="section__content">
                          <div
                            class="content-box"
                            data-define="{paymentMethod: undefined}">
                            <div class="content-box__row">
                              <div class="radio-wrapper">
                                <div class="radio__input">
                                  <input
                                    name="paymentMethod"
                                    id="paymentMethod-65992"
                                    type="radio"
                                    class="input-radio"
                                    data-bind="paymentMethod"
                                    value="65992"
                                    data-provider-id="4"
                                    checked />
                                </div>
                                <label
                                  for="paymentMethod-65992"
                                  class="radio__label">
                                  <span class="radio__label__primary"
                                    >Thanh to√°n khi giao h√†ng (COD)</span
                                  >
                                  <span class="radio__label__accessory">
                                    <span class="radio__label__icon">
                                      <i
                                        class="payment-icon payment-icon--4"></i>
                                    </span>
                                  </span>
                                </label>
                              </div>

                              <div
                                class="content-box__row__desc"
                                data-bind-show="paymentMethod == 65992"
                                data-provider-id="4">
                                <p>
                                  B·∫°n ch·ªâ ph·∫£i thanh to√°n khi nh·∫≠n ƒë∆∞·ª£c h√†ng
                                </p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </section>
                    </div>
                  </article>
                  <div
                    class="field__input-btn-wrapper field__input-btn-wrapper--vertical hide-on-desktop">
                    <button
                      type="submit"
                      class="btn btn-checkout spinner"
                      data-bind-class="{'spinner--active': isSubmitingCheckout}"
                      data-bind-disabled="isSubmitingCheckout || isLoadingReductionCode">
                      <span class="spinner-label">ƒê·∫∂T H√ÄNG</span>
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="spinner-loader">
                        <use href="#spinner"></use>
                      </svg>
                    </button>

                    <a href="./GioHang.html" class="previous-link">
                      <i class="previous-link__arrow">‚ùÆ</i>
                      <span class="previous-link__content"
                        >Quay v·ªÅ gi·ªè h√†ng</span
                      >
                    </a>
                  </div>

                  <div id="common-alert" data-tg-refresh="refreshError">
                    <div
                      class="alert alert--danger hide-on-desktop hide"
                      data-bind-show="!isSubmitingCheckout && isSubmitingCheckoutError"
                      data-bind="submitingCheckoutErrorMessage">
                      C√≥ l·ªói x·∫£y ra khi x·ª≠ l√Ω. Vui l√≤ng th·ª≠ l·∫°i
                    </div>
                  </div>
                </div>
              </main>
              <aside class="sidebar">
                <div class="sidebar__header">
                  <h2 class="sidebar__title">
                    ƒê∆°n h√†ng (<span id="cart-item-count">0</span> s·∫£n ph·∫©m)
                  </h2>
                </div>
                <div class="sidebar__content">
                  <div
                    id="order-summary"
                    class="order-summary order-summary--is-collapsed">
                    <div class="order-summary__sections">
                      <div
                        class="order-summary__section order-summary__section--product-list order-summary__section--is-scrollable order-summary--collapse-element">
                        <table
                          class="product-table"
                          id="product-table"
                          data-tg-refresh="refreshDiscount">
                          <caption class="visually-hidden">
                            Chi ti·∫øt ƒë∆°n h√†ng
                          </caption>
                          <thead class="product-table__header">
                            <tr>
                              <th>
                                <span class="visually-hidden"
                                  >·∫¢nh s·∫£n ph·∫©m</span
                                >
                              </th>
                              <th>
                                <span class="visually-hidden">M√¥ t·∫£</span>
                              </th>
                              <th>
                                <span class="visually-hidden">S·ªë l∆∞·ª£ng</span>
                              </th>
                              <th>
                                <span class="visually-hidden">ƒê∆°n gi√°</span>
                              </th>
                            </tr>
                          </thead>
                          <tbody id="checkout-cart-items">
                            <!-- Cart items will be populated here -->
                          </tbody>
                        </table>
                      </div>
                      <div
                        class="order-summary__section order-summary__section--discount-code"
                        data-tg-refresh="refreshDiscount"
                        id="discountCode">
                        <h3 class="visually-hidden">M√£ khuy·∫øn m·∫°i</h3>
                        <div class="edit_checkout animate-floating-labels">
                          <div class="fieldset">
                            <div class="field">
                              <div class="field__input-btn-wrapper">
                                <div class="field__input-wrapper">
                                  <label
                                    for="reductionCode"
                                    class="field__label"
                                    >Nh·∫≠p m√£ gi·∫£m gi√°</label
                                  >
                                  <input
                                    name="reductionCode"
                                    id="reductionCode"
                                    type="text"
                                    class="field__input"
                                    autocomplete="off"
                                    data-bind-disabled="isLoadingReductionCode"
                                    data-bind-event-keypress="handleReductionCodeKeyPress(event)"
                                    data-define="{reductionCode: null}"
                                    data-bind="reductionCode" />
                                </div>
                                <button
                                  class="field__input-btn btn spinner btn--disabled"
                                  type="button"
                                  data-bind-disabled="isLoadingReductionCode || !reductionCode"
                                  data-bind-class="{'spinner--active': isLoadingReductionCode, 'btn--disabled': !reductionCode}"
                                  data-bind-event-click="applyReductionCode()"
                                  disabled="">
                                  <span class="spinner-label">√Åp d·ª•ng</span>
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="spinner-loader">
                                    <use href="#spinner"></use>
                                  </svg>
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div
                        class="order-summary__section order-summary__section--total-lines order-summary--collapse-element"
                        data-define="{subTotalPriceText: '0‚Ç´'}"
                        data-tg-refresh="refreshOrderTotalPrice"
                        id="orderSummary">
                        <table class="total-line-table">
                          <caption class="visually-hidden">
                            T·ªïng gi√° tr·ªã
                          </caption>
                          <thead>
                            <tr>
                              <td>
                                <span class="visually-hidden">M√¥ t·∫£</span>
                              </td>
                              <td>
                                <span class="visually-hidden">Gi√° ti·ªÅn</span>
                              </td>
                            </tr>
                          </thead>
                          <tbody class="total-line-table__tbody">
                            <tr class="total-line total-line--subtotal">
                              <th class="total-line__name">T·∫°m t√≠nh</th>
                              <td class="total-line__price" id="subtotal-price">
                                0‚Ç´
                              </td>
                            </tr>

                            <tr class="total-line total-line--shipping-fee">
                              <th class="total-line__name">Ph√≠ v·∫≠n chuy·ªÉn</th>
                              <td class="total-line__price">
                                <span
                                  class="origin-price"
                                  data-bind="getTextShippingPriceOriginal()"></span>
                                <span data-bind="getTextShippingPriceFinal()"
                                  >-</span
                                >
                              </td>
                            </tr>
                          </tbody>
                          <tfoot class="total-line-table__footer">
                            <tr class="total-line payment-due">
                              <th class="total-line__name">
                                <span class="payment-due__label-total">
                                  T·ªïng c·ªông
                                </span>
                              </th>
                              <td class="total-line__price">
                                <span
                                  class="payment-due__price"
                                  id="total-price"
                                  >0‚Ç´</span
                                >
                              </td>
                            </tr>
                          </tfoot>
                        </table>
                      </div>
                      <div
                        class="order-summary__nav field__input-btn-wrapper hide-on-mobile layout-flex--row-reverse">
                        <button
                          type="submit"
                          class="btn btn-checkout spinner"
                          data-bind-class="{'spinner--active': isSubmitingCheckout}"
                          data-bind-disabled="isSubmitingCheckout || isLoadingReductionCode">
                          <span class="spinner-label">ƒê·∫∂T H√ÄNG</span>
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="spinner-loader">
                            <use href="#spinner"></use>
                          </svg>
                        </button>

                        <a href="./GioHang.html" class="previous-link">
                          <i class="previous-link__arrow">‚ùÆ</i>
                          <span class="previous-link__content"
                            >Quay v·ªÅ gi·ªè h√†ng</span
                          >
                        </a>
                      </div>
                      <div
                        id="common-alert-sidebar"
                        data-tg-refresh="refreshError">
                        <div
                          class="alert alert--danger hide-on-mobile hide"
                          data-bind-show="!isSubmitingCheckout && isSubmitingCheckoutError"
                          data-bind="submitingCheckoutErrorMessage">
                          C√≥ l·ªói x·∫£y ra khi x·ª≠ l√Ω. Vui l√≤ng th·ª≠ l·∫°i
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </aside>
            </div>
          </form>
        </div>
      </section>

      <!-- Brand Partners Section -->
      <section class="section_brand">
        <div class="container">
          <div class="brand">
            <div
              class="brand-swiper swiper-container swiper-container-initialized swiper-container-horizontal swiper-container-pointer-events"
              style="cursor: grab">
              <div
                class="swiper-wrapper"
                style="transform: translate3d(0px, 0px, 0px)">
                <div
                  class="swiper-slide swiper-slide-active"
                  style="width: 100px; margin-right: 40px">
                  <a href="#" title="ƒê·ªëi t√°c 1">
                    <img
                      width="100"
                      height="60"
                      src="https://bizweb.dktcdn.net/100/063/369/themes/877483/assets/img_brand_1.jpg?1676015309640"
                      alt="ƒê·ªëi t√°c 1"
                      class="img-responsive" />
                  </a>
                </div>
                <div
                  class="swiper-slide swiper-slide-next"
                  style="width: 100px; margin-right: 40px">
                  <a href="#" title="ƒê·ªëi t√°c 2">
                    <img
                      width="100"
                      height="60"
                      src="https://bizweb.dktcdn.net/100/063/369/themes/877483/assets/img_brand_2.jpg?1676015309640"
                      alt="ƒê·ªëi t√°c 2"
                      class="img-responsive" />
                  </a>
                </div>
                <div
                  class="swiper-slide"
                  style="width: 100px; margin-right: 40px">
                  <a href="#" title="ƒê·ªëi t√°c 3">
                    <img
                      width="100"
                      height="60"
                      src="https://bizweb.dktcdn.net/100/063/369/themes/877483/assets/img_brand_3.jpg?1676015309640"
                      alt="ƒê·ªëi t√°c 3"
                      class="img-responsive" />
                  </a>
                </div>
                <div
                  class="swiper-slide"
                  style="width: 100px; margin-right: 40px">
                  <a href="#" title="ƒê·ªëi t√°c 4">
                    <img
                      width="100"
                      height="60"
                      src="https://bizweb.dktcdn.net/100/063/369/themes/877483/assets/img_brand_4.jpg?1676015309640"
                      alt="ƒê·ªëi t√°c 4"
                      class="img-responsive" />
                  </a>
                </div>
                <div
                  class="swiper-slide"
                  style="width: 100px; margin-right: 40px">
                  <a href="#" title="ƒê·ªëi t√°c 5">
                    <img
                      width="100"
                      height="60"
                      src="https://bizweb.dktcdn.net/100/063/369/themes/877483/assets/img_brand_5.jpg?1676015309640"
                      alt="ƒê·ªëi t√°c 5"
                      class="img-responsive" />
                  </a>
                </div>
                <div
                  class="swiper-slide"
                  style="width: 100px; margin-right: 40px">
                  <a href="#" title="ƒê·ªëi t√°c 6">
                    <img
                      width="100"
                      height="60"
                      src="https://bizweb.dktcdn.net/100/063/369/themes/877483/assets/img_brand_6.jpg?1676015309640"
                      alt="ƒê·ªëi t√°c 6"
                      class="img-responsive" />
                  </a>
                </div>
              </div>
            </div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
          </div>
        </div>
      </section>
    </main>

    <footer id="footer" class="footer">
      <div class="widget">
        <div class="container">
          <div class="row">
            <div class="col-lg-3 col-md-6 no-padding-l">
              <div class="widget-item">
                <a class="footer-logo" href="#"
                  ><img
                    width="195"
                    height="77"
                    alt="SunShine School Theme"
                    src="https://bizweb.dktcdn.net/100/063/369/themes/877483/assets/logo_white.png"
                /></a>
                <!-- End .widget-title -->
                <div class="widget-menu infomation">
                  <div class="time_work">
                    <div class="item">
                      <svg
                        aria-hidden="true"
                        focusable="false"
                        data-prefix="fas"
                        data-icon="phone-alt"
                        role="img"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512"
                        class="svg-inline--fa fa-phone-alt fa-w-16">
                        <path
                          fill="currentColor"
                          d="M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"
                          class=""></path>
                      </svg>
                      <a class="fone" href="tel:18006750">1800 6750</a>
                    </div>
                    <div class="item">
                      <svg
                        aria-hidden="true"
                        focusable="false"
                        data-prefix="fas"
                        data-icon="map-marker-alt"
                        role="img"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 384 512"
                        class="svg-inline--fa fa-map-marker-alt fa-w-12">
                        <path
                          fill="currentColor"
                          d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"
                          class=""></path>
                      </svg>
                      <span class="dc">
                        T·∫ßng 6, 266 ƒê·ªôi C·∫•n, Ba ƒê√¨nh, H√† N·ªôi
                      </span>
                    </div>
                    <div class="item">
                      <svg
                        aria-hidden="true"
                        focusable="false"
                        data-prefix="fas"
                        data-icon="envelope"
                        role="img"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512"
                        class="svg-inline--fa fa-envelope fa-w-16">
                        <path
                          fill="currentColor"
                          d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"
                          class=""></path>
                      </svg>
                      <a href="mailto:support@sapo.vn">support@sapo.vn</a>
                    </div>
                  </div>
                  <div class="social_icon">
                    <ul>
                      <li>
                        <a
                          target="_blank"
                          title="Facebook"
                          href="https://www.facebook.com/"
                          ><svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 320 512">
                            <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
                            <path
                              d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg
                        ></a>
                      </li>
                      <li>
                        <a
                          target="_blank"
                          title="Linkedin"
                          href="https://www.linkedin.com/"
                          ><svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 448 512">
                            <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
                            <path
                              d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg
                        ></a>
                      </li>
                      <li>
                        <a
                          target="_blank"
                          title="Twitter"
                          href="https://twitter.com/"
                          ><svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 512 512">
                            <!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
                            <path
                              d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg
                        ></a>
                      </li>
                    </ul>
                  </div>
                </div>
                <!-- End .widget-menu -->
              </div>
            </div>
            <div class="col-lg-3 col-md-6 no-padding-l">
              <div class="widget-item">
                <h4 class="widget-title">Tin nh√† tr∆∞·ªùng</h4>
                <!-- End .widget-title -->
                <ul class="widget-menu">
                  <li><a href="#" class="has_icon">Trang ch·ªß</a></li>
                  <li><a href="#" class="has_icon">S·∫£n ph·∫©m</a></li>
                  <li>
                    <a href="#" class="has_icon">Ch∆∞∆°ng tr√¨nh gi√°o d·ª•c</a>
                  </li>
                  <li><a href="#" class="has_icon">Tuy·ªÉn sinh</a></li>
                  <li><a href="#" class="has_icon">Tin t·ª©c</a></li>
                  <li><a href="#" class="has_icon">Gi·ªõi thi·ªáu</a></li>
                </ul>
                <!-- End .widget-menu -->
              </div>
              <!-- End .widget-item -->
            </div>

            <div class="col-lg-3 col-md-6 no-padding-l">
              <div class="widget-item">
                <h4 class="widget-title">Kinh nghi·ªám hay</h4>
                <!-- End .widget-title -->
                <ul class="widget-menu">
                  <li><a href="#" class="has_icon">Trang ch·ªß</a></li>
                  <li><a href="#" class="has_icon">S·∫£n ph·∫©m</a></li>
                  <li>
                    <a href="#" class="has_icon">Ch∆∞∆°ng tr√¨nh gi√°o d·ª•c</a>
                  </li>
                  <li><a href="#" class="has_icon">Tuy·ªÉn sinh</a></li>
                  <li><a href="#" class="has_icon">Tin t·ª©c</a></li>
                  <li><a href="#" class="has_icon">Gi·ªõi thi·ªáu</a></li>
                </ul>
                <!-- End .widget-menu -->
              </div>
              <!-- End .widget-item -->
            </div>
            <div class="hidden-xs col-lg-3 col-md-6 no-padding-lr">
              <div class="widget-item">
                <h4 class="widget-title">Facebook</h4>
                <!-- End .widget-title -->
                <div
                  class="fb-page fb_iframe_widget"
                  data-href="https://www.facebook.com/sapo.vn/"
                  data-small-header="false"
                  data-adapt-container-width="true"
                  data-hide-cover="false"
                  data-show-facepile="true">
                  <iframe
                    src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fsapo.vn%2F&tabs&width=255&height=130&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true"
                    width="255"
                    height="130"
                    style="border: none; overflow: hidden"
                    scrolling="no"
                    frameborder="0"
                    allowfullscreen="true"
                    allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe>
                </div>
                <!-- End .widget-menu -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End .widget -->
      <div class="hidden-xs hidden-sm">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <div class="plane_fly_lg"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="container">
          <div class="row">
            <div class="col-lg-6 col-md-12 copyright-pr no-padding-r">
              <div
                class="copyright"
                style="white-space: nowrap; display: inline-block">
                ¬© B·∫£n quy·ªÅn thu·ªôc v·ªÅ <b>Awesome Team</b> | Cung c·∫•p b·ªüi
                <a
                  href="https://www.sapo.vn/"
                  rel="nofollow"
                  title="Sapo"
                  target="_blank"
                  >Sapo</a
                >
              </div>
            </div>
            <div class="col-lg-6 col-md-12 no-padding-l">
              <div class="pull-right">
                <ul class="bottom_linklist">
                  <li><a href="#" title="Trang ch·ªß">Trang ch·ªß</a></li>
                  <li><a href="#" title="S·∫£n ph·∫©m">S·∫£n ph·∫©m</a></li>
                  <li>
                    <a href="#" title="Ch∆∞∆°ng tr√¨nh gi√°o d·ª•c"
                      >Ch∆∞∆°ng tr√¨nh gi√°o d·ª•c</a
                    >
                  </li>
                  <li><a href="#" title="Tuy·ªÉn sinh">Tuy·ªÉn sinh</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scroll to top button -->
    <div id="back-to-top" class="back-to-top">
      <a class="top" href="#" title="Scroll to top">
        <i class="fa fa-angle-up"></i
      ></a>
    </div>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
    <!-- Swiper JS -->
    <script src="https://unpkg.com/swiper@6.8.4/swiper-bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="./assets/js/main.js"></script>
    <script src="./assets/js/header.js"></script>
    <script src="./assets/js/footer.js"></script>
    <script src="./assets/js/scroll-top.js"></script>
    <script src="./assets/js/brand-partners.js"></script>
    <script src="./assets/js/cart-manager.js"></script>
    <script>
      // Checkout page functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize checkout page
        initializeCheckoutPage();

        // Form validation and submission
        const checkoutForm = document.getElementById("checkoutForm");
        if (checkoutForm) {
          checkoutForm.addEventListener("submit", handleCheckoutSubmit);
        }

        // Floating label functionality
        const inputs = document.querySelectorAll(".field__input");
        inputs.forEach((input) => {
          input.addEventListener("focus", handleInputFocus);
          input.addEventListener("blur", handleInputBlur);
          input.addEventListener("input", handleInputChange);

          // Check initial state
          if (input.value) {
            input.closest(".field").classList.add("field--show-floating-label");
          }
        });

        // Province selection handler
        const provinceSelect = document.getElementById("billingProvince");
        if (provinceSelect) {
          provinceSelect.addEventListener("change", handleProvinceChange);
        }

        // Discount code functionality
        const discountBtn = document.querySelector(".field__input-btn");
        const discountInput = document.getElementById("reductionCode");
        if (discountBtn && discountInput) {
          discountBtn.addEventListener("click", applyDiscountCode);
          discountInput.addEventListener("input", function () {
            if (this.value.trim()) {
              discountBtn.classList.remove("btn--disabled");
              discountBtn.disabled = false;
            } else {
              discountBtn.classList.add("btn--disabled");
              discountBtn.disabled = true;
            }
          });
        }
      });

      function initializeCheckoutPage() {
        // Load cart items from localStorage
        const cartData = localStorage.getItem("sunschool_cart");
        let cart = [];

        try {
          cart = cartData ? JSON.parse(cartData) : [];
        } catch (e) {
          console.error("Error loading cart:", e);
          cart = [];
        }

        // Update cart count in sidebar title
        const cartCountElement = document.getElementById("cart-item-count");
        if (cartCountElement) {
          const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
          cartCountElement.textContent = totalItems;
        }

        // Populate cart items in checkout
        populateCheckoutItems(cart);

        // Calculate and display totals
        calculateTotals(cart);

        // If cart is empty, redirect to cart page
        if (cart.length === 0) {
          alert(
            "Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng. Vui l√≤ng th√™m s·∫£n ph·∫©m tr∆∞·ªõc khi thanh to√°n."
          );
          window.location.href = "./GioHang.html";
          return;
        }
      }

      function populateCheckoutItems(cart) {
        const cartItemsContainer = document.getElementById(
          "checkout-cart-items"
        );
        if (!cartItemsContainer) return;

        if (cart.length === 0) {
          cartItemsContainer.innerHTML = `
            <tr>
              <td colspan="4" style="text-align: center; padding: 40px;">
                <p>Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o trong gi·ªè h√†ng</p>
              </td>
            </tr>
          `;
          return;
        }

        let itemsHtml = "";
        cart.forEach((item) => {
          // Extract numeric price
          let itemPrice = 0;
          if (item.price && !item.price.includes("Li√™n h·ªá")) {
            const priceString = item.price;
            const matches = priceString.match(/[\d,.]+/g);
            if (matches && matches.length > 0) {
              itemPrice = parseFloat(
                matches[0].replace(/\./g, "").replace(/,/g, "")
              );
            }
          }

          const formattedPrice = formatPrice(itemPrice);
          const imageUrl = item.image.startsWith("//")
            ? "https:" + item.image
            : item.image;

          itemsHtml += `
            <tr class="product">
              <td class="product__image">
                <div class="product-thumbnail">
                  <div class="product-thumbnail__wrapper">
                    <img src="${imageUrl}" alt="${item.name}" class="product-thumbnail__image">
                  </div>
                  <span class="product-thumbnail__quantity">${item.quantity}</span>
                </div>
              </td>
              <th class="product__description">
                <span class="product__description__name">
                  ${item.name}
                </span>
              </th>
              <td class="product__quantity visually-hidden"><em>S·ªë l∆∞·ª£ng:</em> ${item.quantity}</td>
              <td class="product__price">
                ${formattedPrice}
              </td>
            </tr>
          `;
        });

        cartItemsContainer.innerHTML = itemsHtml;
      }

      function calculateTotals(cart) {
        let subtotal = 0;

        cart.forEach((item) => {
          let itemPrice = 0;
          if (item.price && !item.price.includes("Li√™n h·ªá")) {
            const priceString = item.price;
            const matches = priceString.match(/[\d,.]+/g);
            if (matches && matches.length > 0) {
              itemPrice = parseFloat(
                matches[0].replace(/\./g, "").replace(/,/g, "")
              );
            }
          }
          subtotal += itemPrice * item.quantity;
        });

        // Update subtotal
        const subtotalElement = document.getElementById("subtotal-price");
        if (subtotalElement) {
          subtotalElement.textContent = formatPrice(subtotal);
        }

        // Update total (for now, same as subtotal since shipping is free)
        const totalElement = document.getElementById("total-price");
        if (totalElement) {
          totalElement.textContent = formatPrice(subtotal);
        }
      }

      function formatPrice(price) {
        return new Intl.NumberFormat("vi-VN", {
          style: "currency",
          currency: "VND",
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        }).format(price);
      }

      function handleInputFocus(e) {
        const field = e.target.closest(".field");
        if (field) {
          field.classList.add("field--show-floating-label");
        }
      }

      function handleInputBlur(e) {
        const field = e.target.closest(".field");
        if (field && !e.target.value) {
          field.classList.remove("field--show-floating-label");
        }
      }

      function handleInputChange(e) {
        const field = e.target.closest(".field");
        if (field) {
          if (e.target.value) {
            field.classList.add("field--show-floating-label");
          } else {
            field.classList.remove("field--show-floating-label");
          }
        }
      }

      function handleProvinceChange(e) {
        const districtSelect = document.getElementById("billingDistrict");
        if (districtSelect) {
          if (e.target.value) {
            districtSelect.disabled = false;
            // In a real application, you would populate districts based on selected province
            districtSelect.innerHTML = `
              <option value="">Ch·ªçn qu·∫≠n/huy·ªán</option>
              <option value="1">Qu·∫≠n 1</option>
              <option value="2">Qu·∫≠n 2</option>
              <option value="3">Qu·∫≠n 3</option>
            `;
          } else {
            districtSelect.disabled = true;
            districtSelect.innerHTML = "";
          }
        }
      }

      function applyDiscountCode() {
        const discountInput = document.getElementById("reductionCode");
        const discountCode = discountInput.value.trim();

        if (!discountCode) {
          return;
        }

        // Simulate discount code validation
        if (discountCode.toLowerCase() === "discount10") {
          alert("M√£ gi·∫£m gi√° ƒë√£ ƒë∆∞·ª£c √°p d·ª•ng! Gi·∫£m 10%");
          // In a real application, you would recalculate totals here
        } else {
          alert("M√£ gi·∫£m gi√° kh√¥ng h·ª£p l·ªá!");
        }
      }

      function handleCheckoutSubmit(e) {
        e.preventDefault();

        // Validate required fields
        const requiredFields = [
          { id: "email", name: "Email" },
          { id: "billingName", name: "H·ªç v√† t√™n" },
          { id: "billingProvince", name: "T·ªânh th√†nh" },
        ];

        let isValid = true;
        const errors = [];

        requiredFields.forEach((field) => {
          const input = document.getElementById(field.id);
          if (input && !input.value.trim()) {
            isValid = false;
            errors.push(field.name);
            input.style.borderColor = "#dc3545";
          } else if (input) {
            input.style.borderColor = "#d9d9d9";
          }
        });

        // Validate email format
        const emailInput = document.getElementById("email");
        if (emailInput && emailInput.value) {
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(emailInput.value)) {
            isValid = false;
            errors.push("Email kh√¥ng h·ª£p l·ªá");
            emailInput.style.borderColor = "#dc3545";
          }
        }

        if (!isValid) {
          alert(
            "Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc:\\n" + errors.join("\\n")
          );
          return;
        }

        // Get cart data
        const cartData = localStorage.getItem("sunschool_cart");
        let cart = [];
        try {
          cart = cartData ? JSON.parse(cartData) : [];
        } catch (e) {
          cart = [];
        }

        if (cart.length === 0) {
          alert("Gi·ªè h√†ng ƒëang tr·ªëng!");
          return;
        }

        // Collect form data
        const formData = new FormData(e.target);
        const orderData = {
          customerInfo: {
            email: formData.get("email"),
            name: formData.get("billingName"),
            phone: formData.get("billingPhone"),
            address: formData.get("billingAddress"),
            province: formData.get("billingProvince"),
            district: formData.get("billingDistrict"),
          },
          items: cart,
          paymentMethod: formData.get("paymentMethod"),
          note: formData.get("note"),
          total: cart.reduce((total, item) => {
            let itemPrice = 0;
            if (item.price && !item.price.includes("Li√™n h·ªá")) {
              const priceString = item.price;
              const matches = priceString.match(/[\d,.]+/g);
              if (matches && matches.length > 0) {
                itemPrice = parseFloat(
                  matches[0].replace(/\./g, "").replace(/,/g, "")
                );
              }
            }
            return total + itemPrice * item.quantity;
          }, 0),
        };

        // Simulate order submission
        const submitBtn = e.target.querySelector(".btn-checkout");
        const originalText = submitBtn.innerHTML;

        submitBtn.innerHTML =
          '<span class="spinner-label">ƒêang x·ª≠ l√Ω...</span>';
        submitBtn.disabled = true;

        setTimeout(() => {
          // Clear cart after successful order
          localStorage.removeItem("sunschool_cart");

          alert(
            `ƒê·∫∑t h√†ng th√†nh c√¥ng!\\n\\nTh√¥ng tin ƒë∆°n h√†ng:\\nKh√°ch h√†ng: ${
              orderData.customerInfo.name
            }\\nEmail: ${
              orderData.customerInfo.email
            }\\nT·ªïng ti·ªÅn: ${formatPrice(
              orderData.total
            )}\\n\\nC·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng!`
          );

          // Redirect to home page
          window.location.href = "./index.html";
        }, 2000);
      }
    </script>
  </body>
</html>
